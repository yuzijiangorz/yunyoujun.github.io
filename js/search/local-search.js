let searchFunc=function(e,t,l){"use strict";new Request(e);let n=new XMLHttpRequest;n.open("GET",e),n.responseType="document",n.overrideMimeType("text/xml"),n.onload=function(){if(n.readyState===n.DONE&&200===n.status){let e=[];n.responseXML.querySelectorAll("entry").forEach(t=>{e.push({title:t.querySelector("title").innerHTML,content:t.querySelector("content").innerHTML,url:t.querySelector("url").innerHTML})});let r=document.getElementById(t);if(!r)return;let c=document.getElementById(l);document.querySelectorAll("#local-search-input").length>0&&r.addEventListener("input",function(){let t='<ul class="search-result-list">',l=this.value;l=l.trim().toLowerCase().split(/[\s\-]+/),c.innerHTML="",this.value.trim().length<=0||(e.forEach(function(e){let n=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");let r=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=e.url,s=-1,o=-1,a=-1;if(""!==c?l.forEach(function(e,t){s=r.indexOf(e),o=c.indexOf(e),s<0&&o<0?n=!1:(o<0&&(o=0),0==t&&(a=o))}):n=!1,n){t+="<li><a href='"+i+"' class='search-result-title'>"+r+"</a>";let n=e.content.trim().replace(/<[^>]+>/g,"");if(a>=0){let e=a-20,r=a+80;e<0&&(e=0),0==e&&(r=100),r>n.length&&(r=n.length);let c=n.substring(e,r);l.forEach(function(e){let t=new RegExp(e,"gi");c=c.replace(t,'<em class="search-keyword">'+e+"</em>")}),t+='<p class="search-result">'+c+"...</p>"}t+="</li>"}}),t+="</ul>",c.innerHTML=t)})}},n.send()};searchFunc(CONFIG.local_search.path,"local-search-input","local-search-result");